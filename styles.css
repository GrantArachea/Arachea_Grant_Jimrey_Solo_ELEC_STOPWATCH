/* styles.css */
*{ box-sizing:border-box; }
html,body{ height:100%; }
body{
  margin:0;
  font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  overflow:hidden;
  color:#eaf2ff;
  background:#050611;
}

/* =========================
   SKY / SCENE
   ========================= */
.sky{
  position:fixed;
  inset:0;
  background:
    radial-gradient(1200px 800px at 50% 10%, rgba(40,70,160,.24), transparent 70%),
    radial-gradient(900px 700px at 10% 30%, rgba(90,50,160,.18), transparent 65%),
    radial-gradient(900px 700px at 90% 25%, rgba(30,120,160,.14), transparent 65%),
    linear-gradient(180deg, #04040e 0%, #06061a 35%, #050513 60%, #04040d 100%);
}

/* subtle haze to make fireworks pop */
.haze{
  position:absolute;
  inset:0;
  background:
    radial-gradient(700px 400px at 50% 70%, rgba(180,200,255,.06), transparent 70%),
    radial-gradient(900px 500px at 20% 80%, rgba(255,120,160,.04), transparent 70%),
    radial-gradient(900px 500px at 80% 80%, rgba(120,255,200,.035), transparent 70%);
  pointer-events:none;
  mix-blend-mode: screen;
  opacity:.9;
}

/* stars */
.stars{
  position:absolute;
  inset:0;
  pointer-events:none;
  opacity:.95;
  transition: opacity 1.2s ease;
}
.star{
  position:absolute;
  width:2px;
  height:2px;
  border-radius:999px;
  background: rgba(255,255,255,.9);
  box-shadow: 0 0 10px rgba(210,230,255,.55);
  opacity:.6;
  animation: twinkle 2.8s infinite ease-in-out;
}
.star.s2{ width:1px; height:1px; opacity:.5; }
.star.s3{ width:3px; height:3px; opacity:.75; }
@keyframes twinkle{
  0%,100%{ transform:scale(1); opacity:.55; }
  50%{ transform:scale(1.35); opacity:.95; }
}

/* moonwash overlay */
.moonwash{
  position:absolute;
  inset:-10%;
  pointer-events:none;
  opacity:0;
  transform: translateY(10px) scale(1.02);
  transition: opacity 900ms ease, transform 1200ms ease;
  background:
    radial-gradient(900px 600px at 20% 10%, rgba(170,220,255,.55), transparent 65%),
    radial-gradient(1200px 900px at 65% 20%, rgba(120,150,255,.33), transparent 70%),
    radial-gradient(1400px 900px at 50% 65%, rgba(60,120,255,.18), transparent 70%),
    linear-gradient(180deg, rgba(20,40,120,.22), rgba(40,15,85,.18), rgba(10,10,30,.05));
  mix-blend-mode: screen;
  filter: blur(2px);
}
.moonwash.is-on{
  opacity:1;
  transform: translateY(0) scale(1.0);
}

/* fireworks container */
.fireworks{
  position:absolute;
  inset:0;
  pointer-events:none;
  overflow:hidden;
}

/* ground */
.ground{
  position:absolute;
  left:0; right:0; bottom:0;
  height:18vh;
  background: linear-gradient(180deg, transparent, rgba(0,0,0,.55) 35%, rgba(0,0,0,.9));
  pointer-events:none;
}

/* =========================
   FIREWORKS (particles)
   ========================= */
.fw{
  position:absolute;
  left:0; top:0;
  width:0; height:0;
  will-change: transform, opacity;
  filter: drop-shadow(0 0 10px rgba(255,255,255,.18));
}

.particle{
  position:absolute;
  left:0; top:0;
  width:3px;
  height:3px;
  border-radius:999px;
  transform: translate3d(0,0,0);
  will-change: transform, opacity;
  opacity:1;
  box-shadow: 0 0 14px rgba(255,255,255,.22);
}

.particle.spark{
  width:2px;
  height:2px;
  box-shadow: 0 0 10px rgba(255,255,255,.18);
}

.trail{
  position:absolute;
  left:0; top:0;
  width:2px;
  height:18px;
  border-radius:999px;
  transform: translate3d(0,0,0);
  opacity:.65;
  filter: blur(.2px);
  transform-origin: center bottom;
}

/* =========================
   UI
   ========================= */
.ui{
  position:relative;
  z-index:10;
  height:100%;
  display:grid;
  place-items:center;
  padding:24px;
}

.header{
  width:min(760px, 92vw);
  margin-bottom:14px;
  display:flex;
  justify-content:space-between;
  align-items:flex-end;
}
.brand__title{
  font-size:18px;
  font-weight:800;
  letter-spacing:.3px;
}
.brand__sub{
  font-size:12px;
  opacity:.8;
  margin-top:4px;
}

.panel{
  width:min(760px, 92vw);
  padding:18px;
  border-radius:18px;
  background: rgba(10,12,26,.55);
  border: 1px solid rgba(170,200,255,.18);
  box-shadow: 0 18px 60px rgba(0,0,0,.45);
  backdrop-filter: blur(8px);
}

.display{
  width:100%;
  padding:18px 16px;
  border-radius:14px;
  background: rgba(255,255,255,.06);
  border: 1px solid rgba(210,230,255,.18);
  font-size: clamp(34px, 6vw, 54px);
  font-weight:900;
  letter-spacing:1px;
  text-align:center;
  text-shadow: 0 0 20px rgba(150,200,255,.18);
}

.controls{
  margin-top:14px;
  display:flex;
  gap:10px;
  flex-wrap:wrap;
  justify-content:center;
}

.btn{
  border: 1px solid rgba(210,230,255,.18);
  background: rgba(255,255,255,.06);
  color:#eaf2ff;
  padding:12px 16px;
  border-radius:12px;
  cursor:pointer;
  font-weight:800;
  letter-spacing:.2px;
  min-width:110px;
  transition: transform .12s ease, background .2s ease, border-color .2s ease, opacity .2s ease;
}
.btn:hover{ transform: translateY(-1px); background: rgba(255,255,255,.09); }
.btn:active{ transform: translateY(0); }
.btn:disabled{
  opacity:.45;
  cursor:not-allowed;
  transform:none;
}

.btn.primary{
  background: linear-gradient(135deg, rgba(255,120,160,.35), rgba(120,180,255,.22));
  border-color: rgba(255,160,200,.35);
}
.btn.danger{
  background: linear-gradient(135deg, rgba(255,70,90,.28), rgba(255,170,90,.18));
  border-color: rgba(255,120,120,.35);
}

/* =========================
   LAPS (NEW)
   ========================= */
.laps{
  margin-top:14px;
  border-radius:14px;
  background: rgba(255,255,255,.04);
  border: 1px solid rgba(210,230,255,.12);
  overflow:hidden;
}

.laps__head{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;
  padding:10px 12px;
  background: rgba(255,255,255,.03);
  border-bottom: 1px solid rgba(210,230,255,.10);
}

.laps__title{
  font-weight:900;
  letter-spacing:.25px;
  font-size:13px;
  opacity:.92;
}

.chip{
  border: 1px solid rgba(210,230,255,.16);
  background: rgba(255,255,255,.06);
  color:#eaf2ff;
  padding:8px 10px;
  border-radius:999px;
  cursor:pointer;
  font-weight:800;
  font-size:12px;
  transition: background .2s ease, transform .12s ease, opacity .2s ease;
}
.chip:hover{ background: rgba(255,255,255,.10); transform: translateY(-1px); }
.chip:active{ transform: translateY(0); }
.chip:disabled{ opacity:.45; cursor:not-allowed; transform:none; }

.laps__list{
  max-height: 220px;
  overflow:auto;
  padding:10px 10px 12px;
}

/* pretty scrollbar (optional) */
.laps__list::-webkit-scrollbar{ width:10px; }
.laps__list::-webkit-scrollbar-thumb{
  background: rgba(210,230,255,.16);
  border-radius: 999px;
  border: 2px solid rgba(10,12,26,.55);
}
.laps__list::-webkit-scrollbar-track{
  background: transparent;
}

.lap{
  display:grid;
  grid-template-columns: 64px 1fr 1fr;
  gap:10px;
  align-items:center;
  padding:10px 10px;
  border-radius:12px;
  background: rgba(255,255,255,.03);
  border: 1px solid rgba(210,230,255,.10);
  margin-top:8px;
}
.lap:first-child{ margin-top:0; }

.lap__idx{
  font-weight:900;
  opacity:.9;
  font-size:12px;
}
.lap__time{
  font-weight:900;
  letter-spacing:.4px;
}
.lap__split{
  text-align:right;
  opacity:.9;
  font-variant-numeric: tabular-nums;
}

/* =========================
   Hint
   ========================= */
.hint{
  margin-top:12px;
  font-size:12px;
  opacity:.82;
  text-align:center;
  line-height:1.35;
}

/* =========================
   "TIME STOP" FREEZE
   (we freeze CSS animations too)
   ========================= */
.freeze *{
  animation-play-state: paused !important;
}
